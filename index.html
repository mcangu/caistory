<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Juego de Preguntas y Respuestas - Historia de Cádiz</title>
    <link
      rel="stylesheet"
      href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css"
    />
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <style>
      body {
        text-align: center;
        margin: 20px;
      }

      .quiz-container {
        max-width: 600px;
        margin: auto;
      }

      .mdl-button {
        margin: 5px;
      }

      #quiz-section,
      #result-section {
        display: none;
      }
    </style>
  </head>

  <body>
    <div id="main-section" class="quiz-container mdl-card mdl-shadow--2dp">
      <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">
          Juego de Preguntas y Respuestas - Historia de Cádiz
        </h2>
      </div>
      <div class="mdl-card__supporting-text">
        <p>Selecciona un tema para comenzar:</p>
        <div>
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
            onclick="iniciarCuestionario('Cádiz Fenicio')"
          >
            Cádiz Fenicio
          </button>
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
            onclick="iniciarCuestionario('Cádiz Romano')"
          >
            Cádiz Romano
          </button>
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
            onclick="iniciarCuestionario('Cádiz Emporio del Orbe')"
          >
            Cádiz Emporio del Orbe
          </button>
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
            onclick="iniciarCuestionario('Constitución de 1812')"
          >
            Constitución de 1812
          </button>
        </div>
      </div>
    </div>

    <div id="quiz-section" class="quiz-container mdl-card mdl-shadow--2dp">
      <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Cuestionario</h2>
      </div>
      <div class="mdl-card__supporting-text" id="pregunta-container"></div>
      <button
        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
        onclick="siguientePregunta()"
      >
        Siguiente Pregunta
      </button>
    </div>

    <div id="result-section" class="quiz-container mdl-card mdl-shadow--2dp">
      <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Resultados</h2>
      </div>
      <div class="mdl-card__supporting-text" id="resultados-container"></div>
      <button
        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
        onclick="volverAlInicio()"
      >
        Volver a la pantalla principal
      </button>
      <button
        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
        onclick="repetirCuestionario()"
      >
        Repetir Cuestionario
      </button>
    </div>

    <script>
      const preguntas = {
        "Cádiz Fenicio": [
          {
            pregunta: "¿Quiénes fundaron Gadir (Cádiz)?",
            opciones: [
              "Los griegos",
              "Los romanos",
              "Los fenicios",
              "Los cartagineses",
            ],
            respuestaCorrecta: "Los fenicios",
          },
          {
            pregunta: "¿En qué siglo fue fundada Gadir?",
            opciones: [
              "Siglo VIII a.C.",
              "Siglo XI a.C.",
              "Siglo VI a.C.",
              "Siglo III a.C.",
            ],
            respuestaCorrecta: "Siglo XI a.C.",
          },
          {
            pregunta:
              "¿Cuál era la principal actividad económica de los fenicios en Gadir?",
            opciones: [
              "La agricultura",
              "La minería",
              "El comercio",
              "La pesca",
            ],
            respuestaCorrecta: "El comercio",
          },
        ],
        "Cádiz Romano": [
          {
            pregunta: "¿Cómo se llamaba Cádiz durante la época romana?",
            opciones: ["Gadir", "Gades", "Hispalis", "Tartessos"],
            respuestaCorrecta: "Gades",
          },
          {
            pregunta:
              "¿Qué emperador romano otorgó el estatus de municipio a Gades?",
            opciones: ["Augusto", "Julio César", "Trajano", "Nerón"],
            respuestaCorrecta: "Julio César",
          },
          {
            pregunta:
              "¿Qué producto era muy valorado por los romanos procedente de Gades?",
            opciones: ["Aceite de oliva", "El garum", "El trigo", "El vino"],
            respuestaCorrecta: "El garum",
          },
        ],
        "Cádiz Emporio del Orbe": [
          {
            pregunta: "¿Por qué Cádiz fue conocida como el Emporio del Orbe?",
            opciones: [
              "Por su importancia comercial durante el siglo XVIII",
              "Por ser una ciudad fortificada",
              "Por su riqueza minera",
              "Por su producción de vinos",
            ],
            respuestaCorrecta:
              "Por su importancia comercial durante el siglo XVIII",
          },
          {
            pregunta:
              "¿Qué tipo de comercio era relevante en Cádiz durante el siglo XVIII?",
            opciones: [
              "Comercio con América",
              "Comercio con Asia",
              "Comercio con África",
              "Comercio con Europa del Este",
            ],
            respuestaCorrecta: "Comercio con América",
          },
          {
            pregunta:
              "¿Cuál era el papel de Cádiz en el comercio español en el siglo XVIII?",
            opciones: [
              "Era un puerto secundario",
              "Era un puerto principal",
              "Era un centro de producción textil",
              "Era una ciudad minera",
            ],
            respuestaCorrecta: "Era un puerto principal",
          },
        ],
        "Constitución de 1812": [
          {
            pregunta: "¿Cómo se conoce popularmente a la Constitución de 1812?",
            opciones: ["La Pepa", "La Gades", "La Libertadora", "La Primera"],
            respuestaCorrecta: "La Pepa",
          },
          {
            pregunta: "¿En qué año se promulgó la Constitución de 1812?",
            opciones: ["1808", "1810", "1812", "1814"],
            respuestaCorrecta: "1812",
          },
          {
            pregunta: "¿Dónde fue promulgada la Constitución de 1812?",
            opciones: ["Madrid", "Sevilla", "Cádiz", "Barcelona"],
            respuestaCorrecta: "Cádiz",
          },
        ],
      };

      let preguntasSeleccionadas = [];
      let respuestasUsuario = [];
      let indicePreguntaActual = 0;

      function iniciarCuestionario(tema) {
        // Selecciona tres preguntas aleatorias del tema elegido
        preguntasSeleccionadas = [];
        respuestasUsuario = [];
        indicePreguntaActual = 0;
        const temaPreguntas = [...preguntas[tema]];
        while (preguntasSeleccionadas.length < 3 && temaPreguntas.length > 0) {
          const indiceAleatorio = Math.floor(
            Math.random() * temaPreguntas.length
          );
          preguntasSeleccionadas.push(
            temaPreguntas.splice(indiceAleatorio, 1)[0]
          );
        }

        // Muestra la primera pregunta
        document.getElementById("main-section").style.display = "none";
        document.getElementById("result-section").style.display = "none";
        document.getElementById("quiz-section").style.display = "block";
        mostrarPregunta();
      }

      function mostrarPregunta() {
        const pregunta = preguntasSeleccionadas[indicePreguntaActual];
        const preguntaContainer = document.getElementById("pregunta-container");
        preguntaContainer.innerHTML = `
                <h4>${pregunta.pregunta}</h4>
                ${pregunta.opciones
                  .map(
                    (opcion, i) => `
                    <label class="mdl-radio mdl-js-radio mdl-js-ripple-effect" for="opcion-${indicePreguntaActual}-${i}">
                        <input type="radio" id="opcion-${indicePreguntaActual}-${i}" class="mdl-radio__button" name="pregunta" value="${opcion}">
                        <span class="mdl-radio__label">${opcion}</span>
                    </label><br>
                `
                  )
                  .join("")}
            `;
      }

      function siguientePregunta() {
        const opciones = document.getElementsByName("pregunta");
        let respuestaUsuario = "";
        for (const opcion of opciones) {
          if (opcion.checked) {
            respuestaUsuario = opcion.value;
            break;
          }
        }

        if (respuestaUsuario === "") {
          alert("Por favor, selecciona una respuesta antes de continuar.");
          return;
        }

        respuestasUsuario.push({
          pregunta: preguntasSeleccionadas[indicePreguntaActual].pregunta,
          respuestaUsuario,
          respuestaCorrecta:
            preguntasSeleccionadas[indicePreguntaActual].respuestaCorrecta,
        });

        indicePreguntaActual++;

        if (indicePreguntaActual < preguntasSeleccionadas.length) {
          mostrarPregunta();
        } else {
          mostrarResultados();
        }
      }

      function mostrarResultados() {
        let correctas = 0;
        respuestasUsuario.forEach((respuesta) => {
          if (respuesta.respuestaUsuario === respuesta.respuestaCorrecta) {
            correctas++;
          }
        });

        document.getElementById("quiz-section").style.display = "none";
        document.getElementById("result-section").style.display = "block";

        const resultadosContainer = document.getElementById(
          "resultados-container"
        );
        resultadosContainer.innerHTML = `<h4>Has acertado ${correctas} de ${preguntasSeleccionadas.length} preguntas.</h4>`;
      }

      function volverAlInicio() {
        document.getElementById("result-section").style.display = "none";
        document.getElementById("main-section").style.display = "block";
      }

      function repetirCuestionario() {
        document.getElementById("result-section").style.display = "none";
        document.getElementById("quiz-section").style.display = "block";
        indicePreguntaActual = 0;
        respuestasUsuario = [];
        mostrarPregunta();
      }
    </script>
  </body>
</html>
